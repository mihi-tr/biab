{% extends "bdpsite/projectmanager.html" %}

{% block "content" %}
<h2>Datasets of {{project.title}}</h2>
<ul>
{% for d in datasets %}
    <li><h3>{{d.name}}
        {% if d.datapackage %}<span class="badge">{{d.datapackage}}</span>{% endif %}
        <a href="delete/{{d.id}}/" class="btn btn-danger btn-xs{% if d.datapackage %} disabled{% endif %}"><i class="glyphicon
        glyphicon-minus-sign"></i></a>
        <a href="preprocess/{{d.id}}/" class="btn btn-xs {% if not d.path %} disabled {% endif %}"><i class="glyphicon glyphicon-sort-by-attributes"></i></a>
        <a href="model/{{d.id}}/" class="btn btn-xs{% if not d.preprocessed %} disabled {% endif %}"><i class="glyphicon glyphicon-list-alt"></i></a>
        <a href="os-upload/{{d.id}}/" class="btn btn-xs{% if not d.preprocessed or not d.datamodel or d.openspending %} disabled {% endif %}"><i class="glyphicon glyphicon-upload"></i></a>
        </h3>
        <p>{{d.description}}</p>
        {% if d.preprocessed %}
        <span class="label label-success">CSV preprocessed for upload</span>
        {% else %}
        <span class="label label-warning">CSV not preprocessed</span>
        {% endif %}
        {% if d.datamodel %}
        <span class="label label-success">OS upload model ready</span>
        {% else %}
        <span class="label label-warning">OS uploade model not ready</span>
        {% endif %}
        {% if d.openspending %}
        <span class="label label-success">Hosted on OS</span>
        {% else %}
        <span class="label label-warning">Not hosted on OS</span>
        {% endif %}
        </li>
{% endfor %}
</ul>
<p><a href="add/" class="btn btn-success">Add a Dataset</a>
{% endblock %}
